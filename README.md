
פרויקט גמר - פיתוח תוכנה למיון מאגר המיילים. 

![image](https://github.com/user-attachments/assets/8299e6fe-dd8e-4cc4-bf6e-bc7b5650d83e)


התוכנה נועדה להקל בקריאת מיילים רבים בנושאים שונים, כאשר היא מסווגת את המייל לקטגוריה אחרי ניתוח הטקסט, ומציגה למשתמש את התוכן העיקרי של המייל שקשור לאותה קטגוריה. 
התוכנה מתבססת בעיקר על ניתוח והבנת הטקסט, היא מתנהלת באופן דינאמי כך שהמשתמש יכול להוסיף נושאים למיון ולהסיר נושאים לא רצויים, ולצורך כך התוכנה הינה תוכנה מתלמדת.


בשעות הרבות בהן עמלתי לבחור רעיון, עלו במוחי עשרות אפשרויות. חלקן מוכרות וקימות וחלקן דלות אלגוריתם, תרתי אחר רעיון שימצה את הידע והלמידה הרבה שקניתי במהלך שנות הלימוד והוצאת התעודה.
מטרתו העיקרית של פרויקט הגמר היא התלמדות, הכרת אלגוריתמים, התנסות עצמית וכמובן שלב הפיתוח עצמו, ואכן מטרת ההתלמדות ורכישת הידע הייתה מטרה משמעות בפרויקט. 
קריטריונים נוספים שעמדו בפני הם- להגיע לרעיון אתגרי ומעניין שיהווה פריצת דרך ויהיה שימושי וכמובן ימומש באלגוריתם חזק וחכם שייתן מענה יעיל לפיתוח נכון.
בחרתי את תחום חקר השפה- בפיענוח מלל ,הבנתה ואופן הפעילות בעקבות כך.
כיום כאשר עולם הטכנולוגיה הולך ומתפתח, אחת הדרכים הנוחות והמקובלות של לקוחות
לתקשר עם מוסד או ארגון היא בעזרת תיבת המייל, כתוצאה מכך תיבת המיילים של כל
מוסד או ארגון מתמלאת באופן מהיר ביותר בהודעות המחכות לקבל מענה. בסופו של
דבר תיבת המייל מכילה בערבוביה מיילים רבים מסוגים שונים, ומנושאים מגוונים שכל
אחד מהם דורש טיפול/ התייחסות אחרת שאינה דומה לרעהו .
על מנת לתת מענה ויחס לכל המיילים שהתקבלו, ולהתייחס אל כל אחד לפי הסוג והנושא
שלו, דרוש כוח אדם, סבלנות רבה, זמן וכושר ריכוז מקסימלי לעבור מנושא לנושא ומעניין
לעניין של כל מייל.
על מנת לסייע בכל אלו החלטתי לייצר כלי עזר לתיבת המייל שימיין את המיילים לנושאים
ולקטגוריות שונות ובכך לצמצם ולהפחית את השימוש בכוח אדם העוסקים במלאכה הקשה.


לפני כשנה פנה אלי מזכיר של ארגון מסוים באלעד ושאל אותי אם אני מכירה כלי שימיין 
בשבילו את תיבת המיילים של הארגון שמתמלאת בקצב מהיר ומסחרר, ערכתי הרבה מאוד חיפושים באינטרנט ולא מצאתי שקיים כלי/תוסף למיון תיבת המייל שניתן להגדירו במהירות ובנוחות.
ב-outlook  וב-Gmail  כן ישנה אפשרות לחלק את תיבת המייל הנכנס לקטגוריות, אבל זה עובד שהמשתמש צריך להכניס תחילה כללים מדויקים לסיווג, לדוגמא כל המיילים שהגיעו מנמענים מסוימים להכניסם לתיקייה כלשהיא, וכן כל המיילים שהגיעו עם כותרת "...." -להכניסם לתיקיה אחרת, כלומר המערכת לא לומדת או מסיקה מסקנות מעצמה לפי בחירות של המשתמש או מילות מפתח שחזרו על עצמם בכל הקטגוריה, אלא צריך להגדיר לה במדויק עבור אילו מילים או מוענים היא תשייך את המייל הספציפי לקטגוריה הרצויה- מה שיוצר סרבול וקושי למשתמש וקושי לחזות את תוכן המיילים שיגיעו.
לאחר זמן הרגשתי שהתחברתי לנושא והחלטתי לבנות תוכנה שתפתור היא בעצמה את הבעיה, בתחילת הדרך חשבתי לבנות את המערכת שתעבוד רק לארגון מסוים אך לבסוף החלטתי לבנות אותה בצורה גלובלית ולא ספציפית כדי שתוכל להתאים לחברות נוספות.
פיתוח מערכת חדשה זו תאפשר למשתמש לצפות במיילים הממוינים עפ"י קטגוריות אותם
הגדיר קודם לכן או תוך כדי השימוש, כך שהמערכת פועלת באופן דינאמי, לומדת ומסיקה מסקנות לאורך כל חיי תפקודה עמ' לספק למשתמש יעילות, אמינות ונוחות.


הבעיה המרכזית בפרויקט היא סיווג המיילים לקטגוריות, כלומר לגרום למערכת "להבין" את תוכן המייל ולסווגו לקטגוריה הנכונה.
בנוסף רציתי ליצור מצב בו המשתמש יכול לשנות את את החלטת האלגוריתם- את נושא המייל, והמערכת תסיק מסקנות לגבי פעולה זו.
כמו כן רציתי שבכל שלב של המערכת, למשתמש תהיה אופציה להוסיף ולהסיר נושאים והמערכת תתמוך במהלכים אלו מבחינה לוגית, ותיקח בחשבון נושאים "ירוקים" לעומת ותיקים מהם.
עוד אתגר שהיה לפני הוא ההתחברות לתיבת המייל ותפיסת כל מייל שמגיע לתיבה.


היעד שהצבתי לפני היה:
לסווג את המיילים באופן מיטבי ומהיר, בעזרת אלגוריתם יעיל ככל האפשר, הן מבחינת אופטימליות ונכונות הסיווג והן מבחינת סיבוכיות זמן הריצה, בכדי-
•	לחסוך במשאבים ובכוח אדם.
•	לספק נוחות למשתמש ולתת אפשרויות שונות של הצגה וסינון ושימוש במידע.
המטרה שלי דרכו:
רכישת ידע והכרה היקפית בטכנולוגית ריאקט שמזנקת ברמת ההתפשטות בשנים האחרונות 
ועוד. data-bases הכרת , Entity Framework ,Web Api   ובטכנולוגיות נוספות כגון:
ולכן התחלתי עם בניית מנגנון נכון ויעיל של ניתוח הטקסט המתקבל תוך תכנון מעמיק והגדרת הדרישות ויצירת ממשק שיאפשר למשתמש לצפות בנתונים בצורה גמישה ונעימה לעין.

בדיקה האם הפרויקט עונה על ההגדרות נעשית ע"י שליחת מיילים לתיבת המייל של הפרויקט והרצת האלגוריתם של הפרויקט תוך ווידוי שהאלגוריתם אכן מסווג את המיילים לקטגוריות באופן מהיר ועד 80% נכונות. 
במקרה של טעות המשתמש יכול לשנות את נושא המייל כהבנתו, ניתן לבדוק את המערכת שוב ולראות את המסקנות שהמערכת לקחה מפעולה זו.


עיבוד שפה טבעית (באנגלית NLP -Natural Language Processing) :הוא תת-תחום של אינטליגנציה מלאכותית ובלשנות . הוא חוקר את הבעיות הקשורות לעיבוד ומניפולציה של שפה טבעית , והבנה של שפה טבעית על מנת לגרום למחשבים " להבין" דברים שנאמרים או נכתבים בשפות אנושיות . עיבוד השפה הטבעית קשור לתחום הבלשנות החישובית , ולעיתים משתמשים במונחים אלה ללא הבחנה ביניהם. 
כאן, נתייחס לעיבוד שפה טבעית כתחום המעשי של פיתוח יישומי מחשב המטפלים בשפה אנושית. 
הערך " בלשנות חישובית " עוסק בפן התאורטי של שילוב רעיונות מתחום מדעי המחשב בחקר השפה האנושית.
מערכת לומדת היא מערכת אשר משפרת את ביצועיה בביצוע משימה נתונה ככל שהיא מבצעת משימה זו.
עקרון הפעולה של מערכות אלו בנוי משני שלבים עיקריים, למידת המידע ובדיקת מידע חדש
בשלב הלמידה, הידוע גם כשלב אימון המערכת, המערכת מקבלת מידע מוכר ובונה מודל סטטיסטי באמצעותו תאפיין מידע חדש בשלב הבדיקה, 
המערכת מקבלת מידע חדש ובהתאם למודל שנבנה מסווגת אותו.
אופן פעילות התוכנה מתחלק מאחורי הקלעים לשני חלקים:
בתחילה השימוש אין למערכת מספיק נתונים על סיווגים מוצלחים שיסייעו לה לפענח את המייל. בשלב זה כשמגיע מייל חדש המערכת מנסה לסווג אותו כפי יכולתה אך תפקיד המשתמש הוא לעקוב אחרי התוצאות ובמידת הצורך גם לתקן את הנושא הנבחר כדי לשפר את האלגוריתם, המערכת מסיקה מסקנות אודות הסיווגים, ולומדת על פיהם כיצד לסווג את
הבאים אודות לכך שהיא מערכת מתלמדת.
בשלב הבא- שלב התפעול, המערכת תהיה מסוגלת לסווג את המיילים בכוחות עצמה עפ"י הידע שרכשה קודם בשלב -הלמידה, בשלב זה היא ממשיכה להגדיל את מאגרי המידע ע"י כל סיווג וסיווג, ובמקרה שטעתה בהחלטתה גם כאן המשתמש יוכל להתערב ולשנות את הקטגוריה.
שני השלבים המתוארים יקרו ויחזרו על עצמם בכל פעם שתוכנס למערכת קטגוריה חדשה.


דרכי הפתרון שנבדקו היו רבות, כמובן שרעיון של סיווג ידני ע"י כח אדם ירד מיד כי מטרת הפרויקט היא לצמצם ככל הניתן בעבודה ידנית.
בין החיפושים אחר אלגוריתם מתאים נתקלתי באלגוריתם של סיווג עפ"י "מבחן כי בריבוע לבדיקת השערת אי תלות", לאחר שלמדתי את הנושא לעומקו הבנתי שמבחן זה לא מתאים לי לסיווג, מכיוון שהוא בודק האם ישנה שייכות או אינה קיימת שייכות בין כל הקטגוריות והמילים ולא פר קטגוריה וקטגוריה.
למעשה לאחר שקראתי רבות על אלגוריתם זה הבנתי שהוא כן יכול לעזור לי בנושא ספציפי אחר של האלגוריתם ואכן השתמשתי בו (יורחב בהמשך) 
עוד אלגוריתם שנבדק הינו אלגוריתם "סיווג בייסאני נאיבי", ויקיפדיה:
''' סיווג בייסיאני נאיבי (או סיווג נאיב בייס - Naive Bayes classifier) בלמידת מכונה הוא אוסף שיטות סיווג המבוססות על חוק בייס‎ ועל ההנחה ה"נאיבית" שאין תלות בין תכונות האובייקטים המסווגים כאשר כבר ידוע סיווגם...
באופן כללי סיווג בייסיאני נאיבי מניח שאם כבר ידוע הסיווג אז ערכי התכונות בלתי תלויים עוד זה בזה. הנחה זאת היא כמובן אולי לא מדויקת, ולכן ערכי ההסתברויות הנובעים ממנה והמשמשים את הסיווג הינם אולי לא מדויקים... '''
אלגוריתם זה משמש גם לסיווג טקסט, ויקיפדיה:
''' סיווג בייסיאני נאיבי הניב תוצאות יפות בתחום של סיווג טקסט לקטגוריות - כמו למשל סיווג דואר אלקטרוני ל"ספאם" או "לא-ספאם", על סמך המילים הכלולות בטקסט... '''
לאחר קריאה מעמיקה ועיון באלגוריתם ואף התחלת כתיבת הקוד שלו הבנתי שאף הוא אינו מתאים לי, מכיון שאני רוצה שהמערכת תתמוך בקטגוריות שתהינה קשורות אחת לשנייה בקשרי אבא לבן- מה שסותר את ההנחה הנאיבית לאי תלות בין תכונות המילים של הקטגוריות.
לאחר חשיבה החלטתי ליצור אלגוריתם משל עצמי שיתמוך בצרכי המערכת, האלגוריתם מבוסס בעיקרו על רעיון שקראתי באינטרנט ונתן לי השראה לעיצובו (N-gram model).
האלגוריתם שיצרתי עונה על כל הדרישות הנדרשות, מביא תוצאה הכי קרובה ובזמן ריצה הגיוני. 

מכיוון שלא קיים רעיון חדשני כזה בשוק לכן יש צורך לפתח תוכנה חדשה שתסווג את המיילים בצורה אוטומטית ע"י אלגוריתם למידת מכונה.
חלופה זו היא הטובה ביותר וחוסכת בכוח אדם, כאב ראש ועלויות.



נושאים באחריות המערכת:
   •   המערכת תופסת את המייל בעת כניסתו לתיבת המיילים של המשתמש ומנתחת אותו.
•      על פי הניתוח המערכת מסווגת את המייל לקטגוריה המתאימה ומוצאת במייל את   
        המשפט שמסמל הכי את הנושא.
•      המערכת תומכת בהכנסת/מחיקת קטגוריות בעזרת האתר.
 •     המערכת תדאג להצגת המיילים המסווגים בצורה מסודרת ונוחה למשתמש.
נושאים שבשלב פיתוח זה אינם באחריות המערכת:
  •  המערכת תומכת במיילים הרשומים בשפה העברית לבד, מילה מלל בשפה זרה אינו נלקח 
      בחשבון של האלגוריתם.
•    אין מעקב אחרי שגיאות טקסט/ שגיאות לשון.
  •  המערכת כרגע אינה מתעסקת עם שרתי מיילים ועובדת על החשבון המייל המקומי בלבד.
•    המערכת אינה באה להחליף את הפלטפורמות של תיבות המייל הקיימות בשוק אלא  
     להשתלב בהם (תוסף), אי לכך המערכת לא מכילה פונקציות לטיפול במיילים, כמו   
     שליחת מייל, מחיקת מייל וכדומה.
•    המערכת מסווגת את המיילים בצורה תקינה עד לנכונות של עד 80% מהפעמים.
אפיון פונקציונלי
•      כניסת משתמש דרך כתובת מייל וסיסמא.
•      קבלת מייל לתיבה.
 •     מציאת הנושא בו המייל עוסק והכנסתו לקטגוריה המתאימה.
•      מציאת המשפט המסמל הקטגוריה הנבחרת.
•      נתינת אפשרות למשתמש לשנות את החלטת המערכת ולקיחת מסקנות מהפעולה.
•      המשתמש יוכל להוסיף עוד קטגוריות תוך כדי השימוש והמערכת תתארגן בהתאם.

ביצועים עיקריים
החלק המרכזי במערכת הינו סיווג המייל לאחת מבין הקטגוריות הקיימות.
התוכנה עושה זאת על סמך סיווג מוצלח של המיילים הקודמים (באם מילים מסוימות הופיעו בקטגוריה מסוימת יותר מקטגוריה אחרת יש סיכוי סביר שגם הפעם המייל שייך לקטגוריה זו) וממסקנות שלקחה תוך כדי ריצה על פי תיקונים ידניים שיבצעו המשתמשים.

אילוצים
מגבלות המערכת הנן נובעות מעצם היותה מערכת ולא מח אנושי, וכחלק מכך יתכנו טעויות שיכלו להימנע אם עין אדם אנושי הייתה עוברת על תוכן המייל.
ובנוסף האלגוריתם שתופס את המייל החדש ומנתח את תוכנו מוכרח להתרחש תוך כמה שניות מזמן קבלת המייל, משום שכאשר יכנסו כמה מיילים בשנייה לעיתים נוצר "אפקט השירה" ונאלצים להמתין זמן רב יותר לקבלת כל המיילים.

•	נושא- קטגוריה לרשימת מיילים העוסקים באותו תחום .
•	תת נושא/ נושא בן- חלוקת נושאים נוספת בתוך נושא, כל 'בן' של נושא נקרא תת נושא.
•	נושא אב- נושא שיש לו תת/תתי נושאים .
•	מילה לנושא- מילה שיש לה שייכות כל שהיא לנושא.
•	משקל מילה לנושא- מידת הקשר של המילה לנושא.
•	מילה משותפת- מילה שקשורה לנושא מסוים ולכל הצאצאים שמתחתיו.
•	מילת קישור- מילה המופיעה בנושאים רבים ואין לה כל השפעה במציאת נושא מסוים.
•	משפט קשור/עיקרי- מידע מתוך תוכן המייל שאותו המשתמש יכול לראות ללא פתיחת המייל.

תיאור התהליך המרכזי של המערכת:
המערכת פועלת באופן דינאמי, כך שכל משתמש יכול להתאים אותה לצרכים האישיים שלו. זאת על ידי שכל משתמש מגדיר נושאים (ותתי נושאים) בהתאם לתוכן המיילים שמקבל. 
המשתמש יכול בכל שלב להוסיף נושאים נוספים ולחילופין למחוק אותם.
המערכת הינה מערכת מתלמדת, המתבססת על מאגרי מילים על פיהם היא תנתח את תוכן המייל, מאגרי מילים אילו גדלים לאורך כל חיי המערכת, ככל שמספר המיילים יעלה יהיו למערכת יותר נתונים המאפשרים לה להגיע לתוצאות מיונים מדויקים יותר.

המערכת פועלת בשתי מישורים:
בתחילת השימוש אין למערכת מספיק נתונים על סיווגים מוצלחים שיסייעו לה לפענח את המייל. בשלב זה כשמגיע מייל חדש המערכת מנסה לסווג אותו כפי יכולתה אך תפקיד המשתמש הוא לעקוב אחרי התוצאות ובמידת הצורך גם לתקן את הנושא הנבחר כדי לשפר את האלגוריתם, המערכת מסיקה מסקנות אודות התיקונים, ולומדת על פיהם כיצד לסווג את
המיילים הבאים.
לדוג' עבור המייל הבא:
"התקבלה תרומה מאת פלוני אלמוני בסך 500 שקלים" הוחלט שהוא בנושא "תרומות"
כל מילות המייל (שלא נפלו בניקוי המייל ממילות קישור) נשמרות במאגר כמתארות את הנושא, לכל מילה ישמר משקל אשר מציין את הסבירות שמילה זו משפיעה במציאת הנושא, עבור כל מופע של המילה במייל מוסיפים לציון המילה 1.
לדוג' עבור המילה שקלים:
מילה	נושא 	משקל
שקלים	תרומות	1

בשלב הבא- שלב התפעול, המערכת נעזרת במילים ובמשקליהם כדי לסווג מיילים נוספים ולהחליט לאיזה נושא הם שייכים.
המערכת תהיה מסוגלת לסווג את המיילים בכוחות עצמה עפ"י הידע שרכשה קודם בשלב -הלמידה, ובמקרה שטעתה בהחלטתה גם כאן המשתמש יוכל להתערב ולשנות את הקטגוריה, בשלב זה היא ממשיכה להגדיל את מאגרי המידע ע"י כל סיווג וסיווג, כתוצאה מכך ככל שהמערכת תקבל יותר מיילים היא עתידה להגיע לתוצאות מדויקות יותר.
הדגשה:
שני השלבים המתוארים יקרו ויחזרו על עצמם בכל פעם שתוכנס למערכת קטגוריה חדשה.


המשך פירוט האלגוריתם מוצג בספר פרויקט המצורף.

[ספר פרויקט SORT-MAIL.pdf](https://github.com/user-attachments/files/18052596/SORT-MAIL.pdf)


